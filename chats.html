<!DOCTYPE html>
<html>
<head>
  <title>Chat</title>
  <link rel="stylesheet" href="chat.css">
</head>
<body>

<h2>Public Chat</h2>

<input type="text" id="username" placeholder="Enter your name">
<br><br>

<input type="text" id="message" placeholder="Type message">
<button onclick="sendMessage()">Send</button>

<div id="chatBox"></div>

<!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyCy1reCJaNB1aG3UXT8LPpRR-CgQXXAdZk",
  authDomain: "mychatapp-8ee22.firebaseapp.com",
  databaseURL: "https://mychatapp-8ee22-default-rtdb.firebaseio.com",
  projectId: "mychatapp-8ee22",
  storageBucket: "mychatapp-8ee22.firebasestorage.app",
  messagingSenderId: "844615179260",
  appId: "1:844615179260:web:2f197d1d330448c6dff079"
};

// Initialize Firebase
firebase.initializeApp(firebaseConfig);

// Database reference
var db = firebase.database().ref("chats");

function sendMessage() {
  var name = document.getElementById("username").value;
  var msg = document.getElementById("message").value;

  if(name == "" || msg == ""){
    alert("Name and message required");
    return;
  }

  db.push({
    user: name,
    message: msg
  });

  document.getElementById("message").value = "";
}

// Receive messages
db.on("child_added", function(snapshot){
  var data = snapshot.val();
  var chatBox = document.getElementById("chatBox");

  chatBox.innerHTML += `<p><b>${data.user}:</b> ${data.message}</p>`;
});
</script>
<a href="index.html">â¬… Back to Home</a>

</body>
</html>
